<div class="card">
  <p-toast></p-toast>
  <div class="text-center mb-5">
    <div>Інтегральні атрибути умов розроблення</div>
  </div>

  <div class="flex">
    <p-table #dt [value]="influenceEvaluationParametrsInfo" styleClass="p-datatable-gridlines" [rowHover]="true" dataKey="id"
      [showCurrentPageReport]="true" [tableStyle]="{'min-width': '90rem'}">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="name">Назва<p-sortIcon field="name"></p-sortIcon></th>
          <th pSortableColumn="price">Оцінка<p-sortIcon field="price"></p-sortIcon></th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-evaluationParametrsInfo>
        <tr>
          <td>{{evaluationParametrsInfo.name}}</td>
          <td class="flex"><p-dropdown [options]="evaluationParametrsInfo.difficultyLevels"
              [(ngModel)]="evaluationParametrsInfo.selectDifficultyLevel" [virtualScroll]="true"
              [virtualScrollItemSize]="38" optionLabel="name"></p-dropdown></td>
        </tr>
      </ng-template>

    </p-table>
  </div>
</div>

<div class="card">
  <div class="text-center mb-5">
    <div>Інтегральні атрибути маштабу</div>
  </div>

  <div class="flex">
    <p-table #dt [value]="scaleEvaluationParametrsInfo" styleClass="p-datatable-gridlines" [rowHover]="true" dataKey="id" [showCurrentPageReport]="true"
      [tableStyle]="{'min-width': '90rem'}">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="name">Назва<p-sortIcon field="name"></p-sortIcon></th>
          <th pSortableColumn="price">Оцінка<p-sortIcon field="price"></p-sortIcon></th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-evaluationParametrsInfo>
        <tr>
          <td>{{evaluationParametrsInfo.name}}</td>
          <td class="flex"><p-dropdown [options]="evaluationParametrsInfo.difficultyLevels"
              [(ngModel)]="evaluationParametrsInfo.selectDifficultyLevel" [virtualScroll]="true"
              [virtualScrollItemSize]="38" optionLabel="name"></p-dropdown></td>
        </tr>
      </ng-template>

    </p-table>
  </div>
</div>

<ng-container *ngFor="let programsParametr of programsParametrs; let i = index">
  <div class="card">
    <div class="text-center mb-5">
      <label for="description">Оцінка складності програми мовою {{programsParametr.name}}</label>
    </div>

    <div>
      <div class="card">
        <p-table [value]="programsParametr.informationObjectEvaluationParametrsInfo" styleClass="p-datatable-gridlines" [rowHover]="true" dataKey="id"
          [showCurrentPageReport]="true" [tableStyle]="{'min-width': '90rem'}">

          <ng-template pTemplate="header">
            <tr>
              <th>Назва</th>
              <th>Низький</th>
              <th>Середній</th>
              <th>Високий</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-informationObjectEvaluationParametrsInfo>
            <tr>
              <td>{{informationObjectEvaluationParametrsInfo.name}}</td>
              <ng-container
                *ngFor="let item of informationObjectEvaluationParametrsInfo.difficultyLevels; let j = index">
                <td><p-inputNumber [attr.id]="'value_info_' + i + '_' + j" [(ngModel)]="item.value"></p-inputNumber>
                </td>
              </ng-container>
            </tr>
          </ng-template>

        </p-table>
      </div>

      <div class="card">
        <p-table [value]="programsParametr.functionEvaluationParametrsInfo" styleClass="p-datatable-gridlines" [rowHover]="true" dataKey="id"
          [showCurrentPageReport]="true" [tableStyle]="{'min-width': '90rem'}">
          <ng-template pTemplate="header">
            <tr>
              <th>Назва</th>
              <th>Низький</th>
              <th>Середній</th>
              <th>Високий</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-functionEvaluationParametrsInfo>
            <tr>
              <td>{{functionEvaluationParametrsInfo.name}}</td>
              <ng-container *ngFor="let item of functionEvaluationParametrsInfo.difficultyLevels; let j = index">
                <td><p-inputNumber [attr.id]="'value_function_' + i + '_' + j" [(ngModel)]="item.value"></p-inputNumber>
                </td>
              </ng-container>
            </tr>
          </ng-template>

        </p-table>
      </div>
    </div>
  </div>
</ng-container>

<div class="card">
  <button pButton pRipple label="Зберегти" icon="pi pi-check" class="p-button-text" (click)="save()"></button>
</div>
